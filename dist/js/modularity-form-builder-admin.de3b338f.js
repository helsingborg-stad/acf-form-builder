!function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a,i;e.a=(a=function(t,e){var n=e.querySelectorAll('.required[type="checkbox"]:checked').length>0;return t.setCustomValidity(n?"":formbuilder.checkbox_required),n},i=function(t){var e=t.querySelectorAll('[type="checkbox"].required');if("object"===o(e)&&e.length>0)for(var n=0;n<e.length;n++){var i=e[n];hyperform.addValidator(i,(function(e){return a(e,t)}))}},function(){for(var t=document.getElementsByClassName("modularity-validation"),e=function(e){var n=t.item(e);!function(t){for(var e=t.getElementsByClassName("checkbox-group"),n=0;n<e.length;n++){var o=e.item(n);i(o)}}(n);var o=n.getElementsByTagName("input");o=(o=Array.from(o)).filter((function(t){return"checkbox"===t.type}));for(var a=0;a<o.length;a++)o[a].addEventListener("click",(function(){for(var t=0;t<o.length;t++)o[t].reportValidity()}))},n=0;n<t.length;n++)e(n)}())},function(t,e){!function(t){var e=[];function n(){t(function(){this.init(),this.dataGathering(),this.updateMainSelect(),this.updateSubSelect(),t(document).on("click",'.post-type-mod-form input[type="checkbox"], .post-type-mod-form .acf-tab-button',function(t){this.dataGathering(),this.updateMainSelect(),this.updateSubSelect()}.bind(this)),t("[data-name='form_conditional_field'] .acf-input select").change(function(t){this.updateSubSelect()}.bind(this))}.bind(this))}n.prototype.init=function(){"undefined"!=typeof notificationConditions&&null!==notificationConditions&&(notificationConditions=JSON.parse(notificationConditions),["conditional_field","conditional_field_equals"].forEach((function(e){t("[data-name='notify'] .acf-row:not(.acf-clone)").each((function(n,o){if(null!==notificationConditions[n]){var a=t("[data-name='form_"+e+"'] .acf-input select",o);a.empty(),a.append(t("<option></option>").attr("value",notificationConditions[n][e]).text(notificationConditions[n][e]).attr("selected","selected"))}}))})))},n.prototype.updateMainSelect=function(){t("[data-name='notify'] .acf-row:not(.acf-clone)").each(function(n,o){var a=t("[data-name='form_conditional_field'] .acf-input select",o),i=t(a).val();t(a).empty(),t.each(e,(function(e,n){i==e?t(a).append(t("<option></option>").attr("value",e).text(e).attr("selected","selected")):t(a).append(t("<option></option>").attr("value",e).text(e))}))}.bind(this))},n.prototype.updateSubSelect=function(){t("[data-name='notify'] .acf-row:not(.acf-clone)").each(function(n,o){var a=t("[data-name='form_conditional_field_equals'] .acf-input select",o),i=t("[data-name='form_conditional_field'] .acf-input select",o),r=t(a).val();t(i).val();t(a).empty(),t.each(e,(function(n,o){i.val()==n&&t.each(e[n],(function(e,n){r==n?t(a).append(t("<option></option>").attr("value",n).text(n).attr("selected","selected")):t(a).append(t("<option></option>").attr("value",n).text(n))}))}))}.bind(this))},n.prototype.dataGathering=function(){e={},t("[data-name='form_fields'] .layout").each((function(n,o){var a=t(o).attr("data-layout"),i=t(".acf-fields  [data-name='label'] .acf-input .acf-input-wrap input",o).val();if(-1!=["select","radio"].indexOf(a)){var r=t("[data-name='required'] .acf-input label input",o).prop("checked"),c=t("[data-name='conditional_logic'] .acf-input label input",o).prop("checked");if(r&&!c){e[i]=[];var l=t("[data-name='values'] tbody [data-name='value'] .acf-input .acf-input-wrap input[type='text']",o);t(l).filter((function(e,n){return!t(n).attr("name").includes("acfclonefield")})).each(function(n,o){t(o).val()&&i&&e[i].push(t(o).val())}.bind(this))}}}))},new n}(jQuery)},,,function(t,e,n){"use strict";n.r(e);o=jQuery,new function(){o(function(){formbuilder.mod_form_authorized||o('[data-name="upload_videos_external"]').hide()}.bind(this))},function(t){function e(){t(function(){this.handleEvents()}.bind(this))}e.prototype.deleteFile=function(e,n,o,a,i){t.ajax({url:ajaxurl,type:"post",data:{action:"delete_file",postId:e,formId:n,filePath:o,fieldName:a},beforeSend:function(t){i.remove()},error:function(t,e,n){console.log("Error: "+e)}})},e.prototype.uploadFile=function(e,n,o,a,i){var r=new FormData;r.append("action","upload_files"),r.append("postId",n),r.append("formId",o),r.append("fieldName",a),t.each(e,(function(t,e){r.append(a+"[]",e)})),t.ajax({url:ajaxurl,type:"POST",data:r,cache:!1,dataType:"json",processData:!1,contentType:!1,beforeSend:function(e){t("input[type=file]",i).hide(),t(".upload-status",i).html('<div class="spinner spinner-dark is-active" style="float:none;"></div>')},success:function(e,n,o){e.success&&t(":submit","#publishing-action,#edit-post").trigger("click"),t(".upload-status",i).html("<p>"+e.data+"</p>"),t("input[type=file]",i).show()},error:function(e,n){console.log("error: "+n),t("input[type=file]",i).show(),t(".upload-status",i).hide()}})},e.prototype.savePost=function(e){var n=t(e.target),o=new FormData(e.target);return o.append("action","save_post"),n.find('button[type="submit"]').attr("disabled","true").append('<span class="spinner"></span>'),t.ajax({url:ajaxurl,type:"POST",data:o,dataType:"json",processData:!1,contentType:!1,success:function(e){e.success?n.find('button[type="submit"]').append('<i class="pricon pricon-check"></i>').find(".spinner").hide():t(".modal-footer",n).html('<span class="notice warning"><i class="pricon pricon-notice-warning"></i> '+e.data+"</span>")},complete:function(){location.hash="",location.reload()}}),!1},e.prototype.handleEvents=function(){t(document).on("submit","#edit-post",function(t){t.preventDefault(),this.savePost(t)}.bind(this)),t(document).on("click",".delete-form-file",function(e){if(e.preventDefault(),window.confirm(formbuilder.delete_confirm)){var n=t(e.target).attr("postid"),o=t(e.target).attr("formid"),a=t(e.target).attr("filepath"),i=t(e.target).attr("fieldname"),r=t(e.target).parents("span");this.deleteFile(n,o,a,i,r)}}.bind(this)),t(document).on("change","input[type=file]",function(e){var n=e.target.files,o=t(e.target).attr("postid"),a=t(e.target).attr("formid"),i=t(e.target).attr("fieldname"),r=t(e.target).parents(".mod-form-field");this.uploadFile(n,o,a,i,r)}.bind(this))},new e}(jQuery);var o,a=n(1),i=n.n(a),r=(function(t){function e(){t(document).ready(function(){this.populateSelectFields(),this.handleEvents()}.bind(this))}e.prototype.populateSelectFields=function(){t('[data-name="conditonal_field"] select').each(function(e,n){var o="",a=t(":selected",n);if(a.val())o=a.val();else{var i=t(n).attr("name");t.ajax({url:ajaxurl,type:"post",data:{action:"get_selected_field",moduleId:modularity_current_post_id,fieldName:i},success:function(e){"error"!=e&&t("option[value='"+e+"']",n).prop("selected",!0)}})}t("optgroup, option",n).remove();var r=this.getOptions();void 0!==r&&r.length>0?(t(".condition-missing").remove(),t.each(r,function(e,a){var i="";t.each(a.selectvalues,function(t,e){var n={label:this.conditionalString(a.groupLabel),value:this.conditionalString(e)};i+="<option value='"+JSON.stringify(n)+"'>"+e+"</option>"}.bind(this));var r='<optgroup label="'+a.groupLabel+'">'+i+"</optgroup>";t(n).append(r),o&&t("option[value='"+o+"']",n).prop("selected",!0)}.bind(this))):(t(".condition-missing").remove(),t('<p class="condition-missing">'+formbuilder.selections_missing+"</p>").insertBefore(n))}.bind(this))},e.prototype.getOptions=function(e){var n=[];return t('[data-layout="radio"]:not(.acf-clone)').each((function(e,o){var a={groupLabel:t(o).find('[data-name="label"] input').val(),selectvalues:[]};t('[data-key="field_58eb670d39fef"] table tbody',o).children("tr.acf-row:not(.acf-clone)").each((function(e,n){var o=t(n).find('[data-name="value"] input').val();a.selectvalues.push(o)})),n.push(a)})),n},e.prototype.conditionalString=function(t){return t=(t=(t=(t=t.toLowerCase()).replace(/\s+/g,"_")).replace(/[^a-z0-9_]+/gi,"")).replace(/_+$/,"")},e.prototype.handleEvents=function(){t(document).on("click",'[data-name="conditional_logic"] [type="checkbox"], [data-layout="radio"] .acf-row-handle > a',function(){this.populateSelectFields()}.bind(this))},new e}(jQuery),n(0));i.a,r.a}]);