!function(t){var e={};function n(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e){!function(t){var e=[];function n(){t(function(){this.init(),this.dataGathering(),this.updateMainSelect(),this.updateSubSelect(),t(document).on("click",'.post-type-mod-form input[type="checkbox"], .post-type-mod-form .acf-tab-button',function(t){this.dataGathering(),this.updateMainSelect(),this.updateSubSelect()}.bind(this)),t("[data-name='form_conditional_field'] .acf-input select").change(function(t){this.updateSubSelect()}.bind(this))}.bind(this))}n.prototype.init=function(){"undefined"!=typeof notificationConditions&&null!==notificationConditions&&(notificationConditions=JSON.parse(notificationConditions),["conditional_field","conditional_field_equals"].forEach((function(e){t("[data-name='notify'] .acf-row:not(.acf-clone)").each((function(n,a){if(null!==notificationConditions[n]){var i=t("[data-name='form_"+e+"'] .acf-input select",a);i.empty(),i.append(t("<option></option>").attr("value",notificationConditions[n][e]).text(notificationConditions[n][e]).attr("selected","selected"))}}))})))},n.prototype.updateMainSelect=function(){t("[data-name='notify'] .acf-row:not(.acf-clone)").each(function(n,a){var i=t("[data-name='form_conditional_field'] .acf-input select",a),o=t(i).val();t(i).empty(),t.each(e,(function(e,n){o==e?t(i).append(t("<option></option>").attr("value",e).text(e).attr("selected","selected")):t(i).append(t("<option></option>").attr("value",e).text(e))}))}.bind(this))},n.prototype.updateSubSelect=function(){t("[data-name='notify'] .acf-row:not(.acf-clone)").each(function(n,a){var i=t("[data-name='form_conditional_field_equals'] .acf-input select",a),o=t("[data-name='form_conditional_field'] .acf-input select",a),c=t(i).val();t(o).val();t(i).empty(),t.each(e,(function(n,a){o.val()==n&&t.each(e[n],(function(e,n){c==n?t(i).append(t("<option></option>").attr("value",n).text(n).attr("selected","selected")):t(i).append(t("<option></option>").attr("value",n).text(n))}))}))}.bind(this))},n.prototype.dataGathering=function(){e={},t("[data-name='form_fields'] .layout").each((function(n,a){var i=t(a).attr("data-layout"),o=t(".acf-fields  [data-name='label'] .acf-input .acf-input-wrap input",a).val();if(-1!=["select","radio"].indexOf(i)){var c=t("[data-name='required'] .acf-input label input",a).prop("checked"),r=t("[data-name='conditional_logic'] .acf-input label input",a).prop("checked");if(c&&!r){e[o]=[];var l=t("[data-name='values'] tbody [data-name='value'] .acf-input .acf-input-wrap input[type='text']",a);t(l).filter((function(e,n){return!t(n).attr("name").includes("acfclonefield")})).each(function(n,a){t(a).val()&&o&&e[o].push(t(a).val())}.bind(this))}}}))},new n}(jQuery)},,,function(t,e,n){"use strict";n.r(e);a=jQuery,new function(){a(function(){formbuilder.mod_form_authorized||a('[data-name="upload_videos_external"]').hide()}.bind(this))},function(t){function e(){t(function(){this.handleEvents()}.bind(this))}e.prototype.deleteFile=function(e,n,a,i,o){t.ajax({url:ajaxurl,type:"post",data:{action:"delete_file",postId:e,formId:n,filePath:a,fieldName:i},beforeSend:function(t){o.remove()},error:function(t,e,n){console.log("Error: "+e)}})},e.prototype.uploadFile=function(e,n,a,i,o){var c=new FormData;c.append("action","upload_files"),c.append("postId",n),c.append("formId",a),c.append("fieldName",i),t.each(e,(function(t,e){c.append(i+"[]",e)})),t.ajax({url:ajaxurl,type:"POST",data:c,cache:!1,dataType:"json",processData:!1,contentType:!1,beforeSend:function(e){t("input[type=file]",o).hide(),t(".upload-status",o).html('<div class="spinner spinner-dark is-active" style="float:none;"></div>')},success:function(e,n,a){e.success&&t(":submit","#publishing-action,#edit-post").trigger("click"),t(".upload-status",o).html("<p>"+e.data+"</p>"),t("input[type=file]",o).show()},error:function(e,n){console.log("error: "+n),t("input[type=file]",o).show(),t(".upload-status",o).hide()}})},e.prototype.savePost=function(e){var n=t(e.target),a=new FormData(e.target);return a.append("action","save_post"),n.find('button[type="submit"]').attr("disabled","true").append('<span class="spinner"></span>'),t.ajax({url:ajaxurl,type:"POST",data:a,dataType:"json",processData:!1,contentType:!1,success:function(e){e.success?n.find('button[type="submit"]').append('<i class="pricon pricon-check"></i>').find(".spinner").hide():t(".modal-footer",n).html('<span class="notice warning"><i class="pricon pricon-notice-warning"></i> '+e.data+"</span>")},complete:function(){location.hash="",location.reload()}}),!1},e.prototype.handleEvents=function(){t(document).on("submit","#edit-post",function(t){t.preventDefault(),this.savePost(t)}.bind(this)),t(document).on("click",".delete-form-file",function(e){if(e.preventDefault(),window.confirm(formbuilder.delete_confirm)){var n=t(e.target).attr("postid"),a=t(e.target).attr("formid"),i=t(e.target).attr("filepath"),o=t(e.target).attr("fieldname"),c=t(e.target).parents("span");this.deleteFile(n,a,i,o,c)}}.bind(this)),t(document).on("change","input[type=file]",function(e){var n=e.target.files,a=t(e.target).attr("postid"),i=t(e.target).attr("formid"),o=t(e.target).attr("fieldname"),c=t(e.target).parents(".mod-form-field");this.uploadFile(n,a,i,o,c)}.bind(this))},new e}(jQuery);var a,i=n(0),o=n.n(i);(function(t){function e(){t(document).ready(function(){this.populateSelectFields(),this.handleEvents()}.bind(this))}e.prototype.populateSelectFields=function(){t('[data-name="conditonal_field"] select').each(function(e,n){var a="",i=t(":selected",n);if(i.val())a=i.val();else{var o=t(n).attr("name");t.ajax({url:ajaxurl,type:"post",data:{action:"get_selected_field",moduleId:modularity_current_post_id,fieldName:o},success:function(e){"error"!=e&&t("option[value='"+e+"']",n).prop("selected",!0)}})}t("optgroup, option",n).remove();var c=this.getOptions();void 0!==c&&c.length>0?(t(".condition-missing").remove(),t.each(c,function(e,i){var o="";t.each(i.selectvalues,function(t,e){var n={label:this.conditionalString(i.groupLabel),value:this.conditionalString(e)};o+="<option value='"+JSON.stringify(n)+"'>"+e+"</option>"}.bind(this));var c='<optgroup label="'+i.groupLabel+'">'+o+"</optgroup>";t(n).append(c),a&&t("option[value='"+a+"']",n).prop("selected",!0)}.bind(this))):(t(".condition-missing").remove(),t('<p class="condition-missing">'+formbuilder.selections_missing+"</p>").insertBefore(n))}.bind(this))},e.prototype.getOptions=function(e){var n=[];return t('[data-layout="radio"]:not(.acf-clone)').each((function(e,a){var i={groupLabel:t(a).find('[data-name="label"] input').val(),selectvalues:[]};t('[data-key="field_58eb670d39fef"] table tbody',a).children("tr.acf-row:not(.acf-clone)").each((function(e,n){var a=t(n).find('[data-name="value"] input').val();i.selectvalues.push(a)})),n.push(i)})),n},e.prototype.conditionalString=function(t){return t=(t=(t=(t=t.toLowerCase()).replace(/\s+/g,"_")).replace(/[^a-z0-9_]+/gi,"")).replace(/_+$/,"")},e.prototype.handleEvents=function(){t(document).on("click",'[data-name="conditional_logic"] [type="checkbox"], [data-layout="radio"] .acf-row-handle > a',function(){this.populateSelectFields()}.bind(this))},new e})(jQuery),o.a}]);